(this["webpackJsonpfirebase-reactjs"]=this["webpackJsonpfirebase-reactjs"]||[]).push([[0],{34:function(e,t,a){e.exports=a(56)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),c=(a(39),a(40),a(33)),s=a(2),l=a(5),u=a(8),d=a(9),p=a(10),m=a(11),h=(a(41),a(21)),f=a.n(h);a(42),a(44);f.a.initializeApp({apiKey:"AIzaSyDqIe63Oa2Dnu-r1Gv57s72y-Zvnqn6Z1Y",authDomain:"learn-reactjs-firebase-d6b68.firebaseapp.com",databaseURL:"https://learn-reactjs-firebase-d6b68.firebaseio.com",projectId:"learn-reactjs-firebase-d6b68",storageBucket:"learn-reactjs-firebase-d6b68.appspot.com",messagingSenderId:"119435121023",appId:"1:119435121023:web:f2942ed109a8cce7eaca4a",measurementId:"G-S442H7DM8R"});var g=f.a.database(),v=f.a,b=a(6),N=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:"",date:"",content:"",textButton:"Simpan",noteId:""},e.handleSaveNotes=function(){var t=e.state,a=t.title,n=t.content,r=t.textButton,o=t.noteId,i=e.props,c=i.saveNotes,s=i.updateNotes,l=JSON.parse(localStorage.getItem("userData")),u={title:a,content:n,date:(new Date).getTime(),userId:l.uid};"Simpan"===r?c(u):(u.noteId=o,s(u))},e.onInputChange=function(t,a){e.setState(Object(l.a)({},a,t.target.value))},e.updateNotes=function(t){console.log(t),e.setState({title:t.data.title,content:t.data.content,textButton:"Update",noteId:t.id})},e.cancelUpdate=function(){e.setState({title:"",content:"",textButton:"Simpan"})},e.deleteNote=function(t,a){t.stopPropagation(),(0,e.props.deleteNotes)({userId:JSON.parse(localStorage.getItem("userData")).uid,noteId:a.id})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("userData"));this.props.getNotes(e.uid)}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,o=t.content,i=t.textButton,c=this.props.notes,s=this.updateNotes;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header"},r.a.createElement("p",null,"Masukkan Catatan Anda"),r.a.createElement("input",{placeholder:"title",value:a,onChange:function(t){return e.onInputChange(t,"title")}}),r.a.createElement("textarea",{placeholder:"context",value:o,onChange:function(t){return e.onInputChange(t,"content")}}),r.a.createElement("div",{className:"button-action"},"Update"===i?r.a.createElement("button",{className:"cancel",onClick:this.cancelUpdate},"Cancel"):null,r.a.createElement("button",{onClick:this.handleSaveNotes},i))),r.a.createElement("hr",null),c.length>0?r.a.createElement(n.Fragment,null,c.map((function(t){var a=t.data.date,n=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(a);return r.a.createElement("div",{className:"content",key:t.id,onClick:function(){return s(t)}},r.a.createElement("p",{className:"body-title"},t.data.title),r.a.createElement("p",{className:"body-date"},n),r.a.createElement("p",{className:"body-content"},t.data.content),r.a.createElement("div",{className:"delete-btn",onClick:function(a){window.confirm("Apakah kamu yakin menghapus catatan ini?")&&e.deleteNote(a,t)}},"Hapus"))}))):null))}}]),a}(n.Component),E=Object(b.b)((function(e){return{userData:e.user,notes:e.notes}}),(function(e){return{saveNotes:function(t){return e(function(e){return function(t){g.ref("notes/"+e.userId).push({title:e.title,content:e.content,date:e.date})}}(t))},getNotes:function(t){return e((a=t,function(e){var t=g.ref("notes/"+a);return new Promise((function(a,n){t.on("value",(function(t){console.log("get data",t.val());var n=[];if(null===t.val())return null;Object.keys(t.val()).map((function(e){n.push({id:e,data:t.val()[e]})})),e({type:"SET_NOTES",value:n}),a(t.val())}))}))}));var a},updateNotes:function(t){return e(function(e){return function(t){var a=g.ref("notes/".concat(e.userId,"/").concat(e.noteId));return new Promise((function(t,n){a.set({title:e.title,content:e.content,date:e.date},(function(e){e?n(!1):t(!0)}))}))}}(t))},deleteNotes:function(t){return e(function(e){return function(t){var a=g.ref("notes/".concat(e.userId,"/").concat(e.noteId));return new Promise((function(e,t){a.remove()}))}}(t))}}}))(N),O=a(12),w=a.n(O),I=a(20),y=(a(52),function(e){var t=e.title,a=e.onclick;return e.loading?r.a.createElement("button",{className:"btn disable",onClick:a},"Loading...."):r.a.createElement("button",{className:"btn",onClick:a},t)}),C=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChangetext=function(t){e.setState(Object(l.a)({},t.target.id,t.target.value))},e.handleLoginSubmit=Object(I.a)(w.a.mark((function t(){var a,n,r,o,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.email,r=a.password,o=e.props.history,t.next=4,e.props.loginAPI({email:n,password:r}).catch((function(e){return e}));case 4:(i=t.sent)?(console.log("login success",i),localStorage.setItem("userData",JSON.stringify(i)),e.setState({email:"",password:""}),o.push("/dashboard")):console.log("login error");case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth-container "},r.a.createElement("div",{className:"auth-card "},r.a.createElement("p",{className:"auth-title"},"Login Page"),r.a.createElement("input",{value:this.state.email,id:"email",className:"auth-input",placeholder:"Email",type:"text",onChange:this.handleChangetext}),r.a.createElement("input",{value:this.state.password,id:"password",className:"auth-input",placeholder:"Password",type:"password",onChange:this.handleChangetext}),r.a.createElement(y,{onclick:this.handleLoginSubmit,title:"Login",loading:this.props.isLoading}),r.a.createElement("div",{className:"nav-register"},r.a.createElement("p",null,"Belum memiliki akun ? ",r.a.createElement("a",{href:"/register"}," Daftar disini!")," "))))}}]),a}(n.Component),S=Object(b.b)((function(e){return{isLoading:e.isLoading}}),(function(e){return{loginAPI:function(t){return e(function(e){return function(t){return new Promise((function(a,n){t({type:"CHANGE_LOADING",value:!0}),v.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){console.log("success",e);var n={email:e.user.email,uid:e.user.uid,emailVerified:e.user.emailVerified,refreshToken:e.user.refreshToken};t({type:"CHANGE_ISLOGIN",value:!0}),t({type:"CHANGE_LOADING",value:!1}),t({type:"CHANGE_USER",value:n}),a(n)})).catch((function(e){var a=e.code,r=e.message;console.log(a,r),t({type:"CHANGE_ISLOGIN",value:!1}),t({type:"CHANGE_LOADING",value:!1}),n(!1)}))}))}}(t))}}}))(C),j=(a(53),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChangetext=function(t){e.setState(Object(l.a)({},t.target.id,t.target.value))},e.handleRegisterSubmit=Object(I.a)(w.a.mark((function t(){var a,n,r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.email,r=a.password,t.next=3,e.props.registerAPI({email:n,password:r}).catch((function(e){return e}));case 3:o=t.sent,console.log(o),o&&e.setState({email:"",password:""});case 6:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"auth-container "},r.a.createElement("div",{className:"auth-card "},r.a.createElement("p",{className:"auth-title"},"Register Page"),r.a.createElement("input",{value:this.state.email,id:"email",className:"auth-input",placeholder:"Email",type:"text",onChange:this.handleChangetext}),r.a.createElement("input",{value:this.state.password,id:"password",className:"auth-input",placeholder:"Password",type:"password",onChange:this.handleChangetext}),r.a.createElement(y,{onclick:this.handleRegisterSubmit,title:"Register",loading:this.props.isLoading})))}}]),a}(n.Component)),A=Object(b.b)((function(e){return{isLoading:e.isLoading}}),(function(e){return{registerAPI:function(t){return e(function(e){return function(t){return new Promise((function(a,n){t({type:"CHANGE_LOADING",value:!0}),v.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(e){console.log("success",e),t({type:"CHANGE_LOADING",value:!1}),a(!0)})).catch((function(e){var a=e.code,r=e.message;console.log(a,r),t({type:"CHANGE_LOADING",value:!1}),n(!1)}))}))}}(t))}}}))(j),k=a(15),L=a(32),G=a(13),x={popup:!1,isLogin:!1,isLoading:!1,user:{},notes:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_POPUP"===t.type?Object(G.a)({},e,{popup:t.value}):"CHANGE_ISLOGIN"===t.type?Object(G.a)({},e,{isLogin:t.value}):"CHANGE_USER"===t.type?Object(G.a)({},e,{user:t.value}):"CHANGE_LOADING"===t.type?Object(G.a)({},e,{isLoading:t.value}):"SET_NOTES"===t.type?Object(G.a)({},e,{notes:t.value}):e},P=Object(k.c)(D,Object(k.a)(L.a));var H=function(){return r.a.createElement(b.a,{store:P},r.a.createElement(c.a,null,r.a.createElement(s.a,{path:"/",exact:!0,component:S}),r.a.createElement(s.a,{path:"/dashboard",exact:!0,component:E}),r.a.createElement(s.a,{path:"/register",component:A})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(55);console.log("config firebase :",v),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.4ab374ee.chunk.js.map